# ライトテーマ ニューモーフィズム シフト管理システム 画面設計書

## 目次
1. [デザインシステム](#デザインシステム)
2. [定数・型定義](#定数型定義)
3. [ベースコンポーネント](#ベースコンポーネント)
4. [画面コンポーネント](#画面コンポーネント)
5. [スタイルシート](#スタイルシート)

---

## デザインシステム

### ライトテーマ ニューモーフィズムデザイン方針
- **ソフトシャドウ**: 白をベースとした立体感のあるシャドウ効果
- **明るいカラーパレット**: 白・ライトグレー・パステルカラーの組み合わせ
- **微細なグラデーション**: 清潔感のある明るい質感
- **控えめなアニメーション**: 上品で洗練された動作

---

## 定数・型定義

### 1. ライトテーマ デザイントークン定義

```typescript
// constants/design-tokens.ts
export const DESIGN_TOKENS = {
  // ライトテーマカラーパレット
  colors: {
    background: {
      primary: '#f8fafc',      // メイン背景（ほぼ白）
      secondary: '#ffffff',     // セカンダリ背景（純白）
      surface: '#f1f5f9',      // サーフェス（薄いグレー）
      elevated: '#fefefe'       // 浮き上がり要素（オフホワイト）
    },
    text: {
      primary: '#1e293b',      // メインテキスト（濃いグレー）
      secondary: '#475569',     // セカンダリテキスト（中グレー）
      muted: '#64748b',        // ミュートテキスト（薄いグレー）
      disabled: '#cbd5e1'      // 無効テキスト（薄いグレー）
    },
    accent: {
      primary: '#3b82f6',      // プライマリアクセント（ブルー）
      secondary: '#06b6d4',     // セカンダリアクセント（シアン）
      success: '#10b981',      // 成功（グリーン）
      warning: '#f59e0b',      // 警告（アンバー）
      error: '#ef4444'         // エラー（レッド）
    },
    shadow: {
      light: '#ffffff',        // ライトシャドウ（白）
      dark: '#e2e8f0'          // ダークシャドウ（薄いグレー）
    },
    border: {
      light: '#f1f5f9',       // 薄いボーダー
      medium: '#e2e8f0',      // 中間ボーダー
      dark: '#cbd5e1'         // 濃いボーダー
    }
  },
  
  // ライトテーマシャドウ設定
  shadows: {
    neumorphic: {
      raised: `
        6px 6px 12px #e2e8f0,
        -6px -6px 12px #ffffff
      `,
      pressed: `
        inset 3px 3px 6px #e2e8f0,
        inset -3px -3px 6px #ffffff
      `,
      floating: `
        8px 8px 16px #e2e8f0,
        -8px -8px 16px #ffffff
      `,
      subtle: `
        3px 3px 6px #e2e8f0,
        -3px -3px 6px #ffffff
      `,
      glow: `
        0 0 20px rgba(59, 130, 246, 0.15),
        6px 6px 12px #e2e8f0,
        -6px -6px 12px #ffffff
      `
    }
  },
  
  // スペーシング
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px',
    xxl: '48px'
  },
  
  // ボーダーラジアス
  borderRadius: {
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '20px',
    full: '50%'
  },
  
  // フォント
  typography: {
    fontFamily: {
      primary: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
      mono: 'SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace'
    },
    fontSize: {
      xs: '12px',
      sm: '14px',
      md: '16px',
      lg: '18px',
      xl: '20px',
      xxl: '24px',
      xxxl: '32px'
    },
    fontWeight: {
      normal: '400',
      medium: '500',
      semibold: '600',
      bold: '700'
    }
  },
  
  // アニメーション
  animation: {
    duration: {
      fast: '150ms',
      normal: '250ms',
      slow: '350ms'
    },
    easing: {
      ease: 'cubic-bezier(0.4, 0, 0.2, 1)',
      bouncy: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)'
    }
  }
} as const;
```

### 2. アイコン定数定義（更新）

```typescript
// constants/icons.ts
import {
  Calendar,
  Clock,
  Users,
  Settings,
  Bell,
  Download,
  Share2,
  FileText,
  Image,
  ArrowLeft,
  ArrowRight,
  ChevronUp,
  ChevronDown,
  Plus,
  Minus,
  Edit,
  Check,
  X,
  AlertTriangle,
  Info,
  CheckCircle,
  XCircle,
  Home,
  User,
  Phone,
  Mail,
  Search,
  Filter,
  MoreHorizontal,
  Menu,
  MessageCircle,
  Send,
  Eye,
  EyeOff,
  Star,
  Heart,
  Bookmark,
  Tag,
  MapPin,
  Coffee,
  Utensils,
  Car,
  Building,
  Sun,
  Moon,
  Zap,
  Shield
} from 'lucide-react';

export const ICONS = {
  // ナビゲーション
  navigation: {
    Calendar,
    Home,
    ArrowLeft,
    ArrowRight,
    ChevronUp,
    ChevronDown,
    Menu
  },
  
  // アクション
  actions: {
    Plus,
    Minus,
    Edit,
    Check,
    X,
    Download,
    Share2,
    Send,
    Search,
    Filter,
    MoreHorizontal
  },
  
  // ステータス
  status: {
    CheckCircle,
    XCircle,
    AlertTriangle,
    Info,
    Eye,
    EyeOff,
    Zap,
    Shield
  },
  
  // ファイル
  files: {
    FileText,
    Image
  },
  
  // ユーザー・コミュニケーション
  user: {
    User,
    Users,
    Phone,
    Mail,
    MessageCircle
  },
  
  // 時間・スケジュール
  time: {
    Clock,
    Calendar
  },
  
  // システム
  system: {
    Settings,
    Bell,
    Sun,
    Moon
  },
  
  // ポジション（シフト用）
  positions: {
    Coffee,      // 洗い場
    Utensils,    // レーン
    Users,       // ホール
    Building     // 管理
  },
  
  // その他
  misc: {
    Star,
    Heart,
    Bookmark,
    Tag,
    MapPin
  }
} as const;

// アイコンタイプ定義
export type IconType = keyof typeof ICONS;
export type IconName<T extends IconType> = keyof typeof ICONS[T];
```

---

## ベースコンポーネント

### 1. ライトテーマ NeumorphicContainer

```typescript
// components/base/NeumorphicContainer.tsx
import React from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { NeumorphicProps } from '@/types/design';

const NeumorphicContainer: React.FC<NeumorphicProps> = ({
  children,
  variant = 'raised',
  disabled = false,
  interactive = false,
  className = '',
  ...props
}) => {
  const baseStyles: React.CSSProperties = {
    backgroundColor: DESIGN_TOKENS.colors.background.primary,
    borderRadius: DESIGN_TOKENS.borderRadius.md,
    transition: `all ${DESIGN_TOKENS.animation.duration.normal} ${DESIGN_TOKENS.animation.easing.ease}`,
    position: 'relative',
    border: 'none',
    outline: 'none'
  };

  const variantStyles: Record<string, React.CSSProperties> = {
    raised: {
      boxShadow: DESIGN_TOKENS.shadows.neumorphic.raised,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.secondary}, ${DESIGN_TOKENS.colors.background.surface})`
    },
    pressed: {
      boxShadow: DESIGN_TOKENS.shadows.neumorphic.pressed,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.surface}, ${DESIGN_TOKENS.colors.background.secondary})`
    },
    floating: {
      boxShadow: DESIGN_TOKENS.shadows.neumorphic.floating,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.elevated}, ${DESIGN_TOKENS.colors.background.secondary})`
    },
    subtle: {
      boxShadow: DESIGN_TOKENS.shadows.neumorphic.subtle,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.primary}, ${DESIGN_TOKENS.colors.background.surface})`
    }
  };

  const interactiveStyles: React.CSSProperties = interactive ? {
    cursor: 'pointer',
    userSelect: 'none'
  } : {};

  const disabledStyles: React.CSSProperties = disabled ? {
    opacity: 0.6,
    cursor: 'not-allowed',
    pointerEvents: 'none'
  } : {};

  const combinedStyles = {
    ...baseStyles,
    ...variantStyles[variant],
    ...interactiveStyles,
    ...disabledStyles
  };

  return (
    <div
      style={combinedStyles}
      className={className}
      {...props}
    >
      {children}
    </div>
  );
};

export default NeumorphicContainer;
```

### 2. ライトテーマ NeumorphicButton

```typescript
// components/base/NeumorphicButton.tsx
import React, { useState } from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { NeumorphicButtonProps } from '@/types/design';
import NeumorphicContainer from './NeumorphicContainer';

const NeumorphicButton: React.FC<NeumorphicButtonProps> = ({
  children,
  size = 'md',
  color = 'primary',
  icon: Icon,
  iconPosition = 'left',
  loading = false,
  disabled = false,
  onClick,
  type = 'button',
  className = '',
  ...props
}) => {
  const [isPressed, setIsPressed] = useState(false);

  const sizeStyles: Record<string, React.CSSProperties> = {
    sm: {
      padding: `${DESIGN_TOKENS.spacing.sm} ${DESIGN_TOKENS.spacing.md}`,
      fontSize: DESIGN_TOKENS.typography.fontSize.sm,
      minHeight: '36px'
    },
    md: {
      padding: `${DESIGN_TOKENS.spacing.md} ${DESIGN_TOKENS.spacing.lg}`,
      fontSize: DESIGN_TOKENS.typography.fontSize.md,
      minHeight: '44px'
    },
    lg: {
      padding: `${DESIGN_TOKENS.spacing.lg} ${DESIGN_TOKENS.spacing.xl}`,
      fontSize: DESIGN_TOKENS.typography.fontSize.lg,
      minHeight: '52px'
    }
  };

  const colorStyles: Record<string, React.CSSProperties> = {
    primary: {
      color: DESIGN_TOKENS.colors.accent.primary,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.secondary}, ${DESIGN_TOKENS.colors.background.surface})`
    },
    secondary: {
      color: DESIGN_TOKENS.colors.text.secondary,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.primary}, ${DESIGN_TOKENS.colors.background.surface})`
    },
    success: {
      color: DESIGN_TOKENS.colors.accent.success,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.secondary}, ${DESIGN_TOKENS.colors.background.surface})`
    },
    warning: {
      color: DESIGN_TOKENS.colors.accent.warning,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.secondary}, ${DESIGN_TOKENS.colors.background.surface})`
    },
    error: {
      color: DESIGN_TOKENS.colors.accent.error,
      background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.secondary}, ${DESIGN_TOKENS.colors.background.surface})`
    }
  };

  const buttonStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    fontFamily: DESIGN_TOKENS.typography.fontFamily.primary,
    width: '100%',
    border: 'none',
    background: 'transparent',
    ...sizeStyles[size],
    ...colorStyles[color]
  };

  const handleMouseDown = () => setIsPressed(true);
  const handleMouseUp = () => setIsPressed(false);
  const handleMouseLeave = () => setIsPressed(false);

  const variant = isPressed ? 'pressed' : 'raised';

  return (
    <NeumorphicContainer
      variant={variant}
      disabled={disabled || loading}
      interactive
      className={className}
      {...props}
    >
      <button
        style={buttonStyles}
        onClick={onClick}
        type={type}
        disabled={disabled || loading}
        onMouseDown={handleMouseDown}
        onMouseUp={handleMouseUp}
        onMouseLeave={handleMouseLeave}
      >
        {loading ? (
          <div style={{
            width: '20px',
            height: '20px',
            border: `2px solid ${colorStyles[color].color}`,
            borderTopColor: 'transparent',
            borderRadius: '50%',
            animation: 'spin 1s linear infinite'
          }} />
        ) : (
          <>
            {Icon && iconPosition === 'left' && <Icon size={18} />}
            {children}
            {Icon && iconPosition === 'right' && <Icon size={18} />}
          </>
        )}
      </button>
    </NeumorphicContainer>
  );
};

export default NeumorphicButton;
```

### 3. ライトテーマ NeumorphicCard

```typescript
// components/base/NeumorphicCard.tsx
import React, { useState } from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { NeumorphicCardProps } from '@/types/design';
import NeumorphicContainer from './NeumorphicContainer';

const NeumorphicCard: React.FC<NeumorphicCardProps> = ({
  children,
  padding = 'lg',
  borderRadius = 'md',
  hoverable = false,
  className = '',
  ...props
}) => {
  const [isHovered, setIsHovered] = useState(false);

  const cardStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing[padding],
    borderRadius: DESIGN_TOKENS.borderRadius[borderRadius],
    width: '100%',
    background: `linear-gradient(145deg, ${DESIGN_TOKENS.colors.background.secondary}, ${DESIGN_TOKENS.colors.background.surface})`
  };

  const hoverableStyles: React.CSSProperties = hoverable ? {
    cursor: 'pointer',
    transform: isHovered ? 'translateY(-2px)' : 'translateY(0)',
    transition: `all ${DESIGN_TOKENS.animation.duration.normal} ${DESIGN_TOKENS.animation.easing.ease}`
  } : {};

  const variant = hoverable && isHovered ? 'floating' : 'raised';

  return (
    <NeumorphicContainer
      variant={variant}
      interactive={hoverable}
      className={className}
      onMouseEnter={() => hoverable && setIsHovered(true)}
      onMouseLeave={() => hoverable && setIsHovered(false)}
      {...props}
    >
      <div style={{...cardStyles, ...hoverableStyles}}>
        {children}
      </div>
    </NeumorphicContainer>
  );
};

export default NeumorphicCard;
```

---

## 画面コンポーネント

### 1. ライトテーマ ShiftDisplayPage

```typescript
import React, { useState, useEffect } from 'react';
import Head from 'next/head';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicCard from '@/components/base/NeumorphicCard';
import NeumorphicButton from '@/components/base/NeumorphicButton';
import Header from '@/components/layout/Header';
import ShiftChart from '@/components/shift/ShiftChart';
import NoticePanel from '@/components/notice/NoticePanel';
import DailyMessages from '@/components/messages/DailyMessages';
import ActionPanel from '@/components/actions/ActionPanel';

interface ShiftDisplayPageProps {
  date: string;
  shifts: EnrichedShift[];
  notices: Notice[];
  dailyMessages: DailyMessage[];
  positions: Position[];
  users: User[];
  isToday: boolean;
}

const ShiftDisplayPage: React.FC<ShiftDisplayPageProps> = ({
  date,
  shifts,
  notices,
  dailyMessages,
  positions,
  users,
  isToday
}) => {
  const [isLineApp, setIsLineApp] = useState(false);

  useEffect(() => {
    const userAgent = navigator.userAgent;
    const lineApp = userAgent.includes('Line/') || userAgent.includes('LINE/');
    setIsLineApp(lineApp);
  }, []);

  const containerStyles: React.CSSProperties = {
    minHeight: '100vh',
    backgroundColor: DESIGN_TOKENS.colors.background.primary,
    fontFamily: DESIGN_TOKENS.typography.fontFamily.primary,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const mainStyles: React.CSSProperties = {
    maxWidth: '1200px',
    margin: '0 auto',
    padding: DESIGN_TOKENS.spacing.md,
    display: 'flex',
    flexDirection: 'column',
    gap: DESIGN_TOKENS.spacing.lg
  };

  return (
    <>
      <Head>
        <title>{formatDate(date)} シフト表</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style jsx global>{getGlobalStyles()}</style>
      </Head>

      <div style={containerStyles}>
        <Header 
          date={date}
          isToday={isToday}
          isLineApp={isLineApp}
        />
        
        <main style={mainStyles}>
          {/* 重要な共有事項 */}
          {notices.length > 0 && (
            <NoticePanel 
              notices={notices}
              isCompact={isLineApp}
            />
          )}

          {/* シフト表本体 */}
          <NeumorphicCard padding="lg">
            <ShiftChart
              date={date}
              shifts={shifts}
              positions={positions}
              users={users}
              isLineView={isLineApp}
            />
          </NeumorphicCard>

          {/* 当日メッセージ */}
          {isToday && dailyMessages.length > 0 && (
            <DailyMessages messages={dailyMessages} />
          )}

          {/* アクションパネル */}
          <ActionPanel 
            date={date}
            isLineApp={isLineApp}
          />
        </main>
      </div>
    </>
  );
};

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('ja-JP', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};

const getGlobalStyles = () => `
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  body {
    margin: 0;
    padding: 0;
    font-family: ${DESIGN_TOKENS.typography.fontFamily.primary};
    background-color: ${DESIGN_TOKENS.colors.background.primary};
    color: ${DESIGN_TOKENS.colors.text.primary};
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  button:focus,
  div:focus {
    outline: 2px solid ${DESIGN_TOKENS.colors.accent.primary};
    outline-offset: 2px;
  }
`;

export default ShiftDisplayPage;
```

### 2. ライトテーマ Header コンポーネント

```typescript
// components/layout/Header.tsx
import React from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicContainer from '@/base/NeumorphicContainer';
import NeumorphicButton from '@/base/NeumorphicButton';

interface HeaderProps {
  date: string;
  isToday: boolean;
  isLineApp: boolean;
}

const Header: React.FC<HeaderProps> = ({ date, isToday, isLineApp }) => {
  const headerStyles: React.CSSProperties = {
    position: isLineApp ? 'static' : 'sticky',
    top: 0,
    zIndex: 10,
    backgroundColor: DESIGN_TOKENS.colors.background.primary,
    padding: DESIGN_TOKENS.spacing.md,
    borderBottom: isLineApp ? 'none' : `1px solid ${DESIGN_TOKENS.colors.border.light}`
  };

  const headerContentStyles: React.CSSProperties = {
    maxWidth: '1200px',
    margin: '0 auto',
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.md
  };

  const titleStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontSize: DESIGN_TOKENS.typography.fontSize.xl,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.semibold,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const navigationStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm
  };

  const todayBadgeStyles: React.CSSProperties = {
    padding: `${DESIGN_TOKENS.spacing.xs} ${DESIGN_TOKENS.spacing.sm}`,
    backgroundColor: DESIGN_TOKENS.colors.accent.primary,
    color: '#ffffff',
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    borderRadius: DESIGN_TOKENS.borderRadius.full,
    boxShadow: DESIGN_TOKENS.shadows.neumorphic.subtle
  };

  const navigateDate = (direction: number) => {
    const currentDate = new Date(date);
    currentDate.setDate(currentDate.getDate() + direction);
    const newDate = currentDate.toISOString().split('T')[0];
    window.location.href = `/${newDate}`;
  };

  const navigateToToday = () => {
    const today = new Date().toISOString().split('T')[0];
    window.location.href = `/${today}`;
  };

  const handleBackToLine = () => {
    if (isLineApp) {
      window.close();
    } else {
      window.history.back();
    }
  };

  return (
    <header style={headerStyles}>
      <NeumorphicContainer variant="subtle">
        <div style={headerContentStyles}>
          <div style={titleStyles}>
            {isLineApp && (
              <NeumorphicButton
                size="sm"
                color="secondary"
                icon={ICONS.navigation.ArrowLeft}
                onClick={handleBackToLine}
              />
            )}
            <ICONS.time.Calendar size={24} color={DESIGN_TOKENS.colors.accent.primary} />
            <span>{formatDateShort(date)}</span>
            {isToday && (
              <span style={todayBadgeStyles}>今日</span>
            )}
          </div>
          
          <div style={navigationStyles}>
            <NeumorphicButton
              size="sm"
              color="secondary"
              icon={ICONS.navigation.ArrowLeft}
              onClick={() => navigateDate(-1)}
            />
            <NeumorphicButton
              size="sm"
              color="primary"
              onClick={navigateToToday}
            >
              今日
            </NeumorphicButton>
            <NeumorphicButton
              size="sm"
              color="secondary"
              icon={ICONS.navigation.ArrowRight}
              onClick={() => navigateDate(1)}
            />
          </div>
        </div>
      </NeumorphicContainer>
    </header>
  );
};

const formatDateShort = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('ja-JP', {
    month: 'short',
    day: 'numeric',
    weekday: 'short'
  });
};

export default Header;
```

---

## スタイルシート

### 1. ライトテーマ グローバルスタイル

```css
/* styles/globals.css */

/* リセット */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ライトテーマベース設定 */
html {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  scroll-behavior: smooth;
}

body {
  background-color: #f8fafc;
  color: #1e293b;
  line-height: 1.6;
  min-height: 100vh;
}

/* アニメーション */
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translateY(10px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes slideIn {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes glow {
  from {
    box-shadow: 0 0 10px rgba(59, 130, 246, 0.2);
  }
  to {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
  }
}

/* フォーカス管理 */
button:focus,
[tabindex]:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 4px;
}

/* スクロールバー（Webkit） */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
  border: 1px solid #f8fafc;
}

::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* テキスト選択 */
::selection {
  background: #3b82f6;
  color: white;
}

/* LINEアプリ内ブラウザ対応 */
.line-webview {
  padding-top: env(safe-area-inset-top, 0);
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* レスポンシブ対応 */
@media (max-width: 768px) {
  body {
    font-size: 14px;
  }
  
  /* タッチ対応 */
  button,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }# ニューモーフィズム シフト管理システム 画面設計書

## 目次
1. [デザインシステム](#デザインシステム)
2. [定数・型定義](#定数型定義)
3. [ベースコンポーネント](#ベースコンポーネント)
4. [画面コンポーネント](#画面コンポーネント)
5. [スタイルシート](#スタイルシート)

---

## デザインシステム

### ニューモーフィズムデザイン方針
- **ソフトシャドウ**: 凹凸感を表現する多層シャドウ
- **統一カラーパレット**: グレー系をベースとした統一感
- **微細なグラデーション**: 立体感を演出
- **控えめなアニメーション**: ユーザビリティを重視

---

## 定数・型定義

### 1. デザイントークン定義

```typescript
// constants/design-tokens.ts
export const DESIGN_TOKENS = {
  // カラーパレット
  colors: {
    background: {
      primary: '#e6e9ef',
      secondary: '#f0f3f7',
      surface: '#eef1f5'
    },
    text: {
      primary: '#2d3748',
      secondary: '#4a5568',
      muted: '#718096',
      disabled: '#a0aec0'
    },
    accent: {
      primary: '#4299e1',
      secondary: '#63b3ed',
      success: '#48bb78',
      warning: '#ed8936',
      error: '#f56565'
    },
    shadow: {
      light: '#ffffff',
      dark: '#d1d9e0'
    }
  },
  
  // シャドウ設定
  shadows: {
    neumorphic: {
      raised: `
        8px 8px 16px #d1d9e0,
        -8px -8px 16px #ffffff
      `,
      pressed: `
        inset 4px 4px 8px #d1d9e0,
        inset -4px -4px 8px #ffffff
      `,
      floating: `
        12px 12px 24px #d1d9e0,
        -12px -12px 24px #ffffff
      `,
      subtle: `
        4px 4px 8px #d1d9e0,
        -4px -4px 8px #ffffff
      `
    }
  },
  
  // スペーシング
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px',
    xxl: '48px'
  },
  
  // ボーダーラジアス
  borderRadius: {
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '20px',
    full: '50%'
  },
  
  // フォント
  typography: {
    fontFamily: {
      primary: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
      mono: 'SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace'
    },
    fontSize: {
      xs: '12px',
      sm: '14px',
      md: '16px',
      lg: '18px',
      xl: '20px',
      xxl: '24px',
      xxxl: '32px'
    },
    fontWeight: {
      normal: '400',
      medium: '500',
      semibold: '600',
      bold: '700'
    }
  },
  
  // アニメーション
  animation: {
    duration: {
      fast: '150ms',
      normal: '250ms',
      slow: '350ms'
    },
    easing: {
      ease: 'cubic-bezier(0.4, 0, 0.2, 1)',
      bouncy: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)'
    }
  }
} as const;
```

### 2. アイコン定数定義

```typescript
// constants/icons.ts
import {
  Calendar,
  Clock,
  Users,
  Settings,
  Bell,
  Download,
  Share2,
  FileText,
  Image,
  ArrowLeft,
  ArrowRight,
  ChevronUp,
  ChevronDown,
  Plus,
  Minus,
  Edit,
  Check,
  X,
  AlertTriangle,
  Info,
  CheckCircle,
  XCircle,
  Home,
  User,
  Phone,
  Mail,
  Search,
  Filter,
  MoreHorizontal,
  Menu,
  MessageCircle,
  Send,
  Eye,
  EyeOff,
  Star,
  Heart,
  Bookmark,
  Tag,
  MapPin,
  Coffee,
  Utensils,
  Car,
  Building
} from 'lucide-react';

export const ICONS = {
  // ナビゲーション
  navigation: {
    Calendar,
    Home,
    ArrowLeft,
    ArrowRight,
    ChevronUp,
    ChevronDown,
    Menu
  },
  
  // アクション
  actions: {
    Plus,
    Minus,
    Edit,
    Check,
    X,
    Download,
    Share2,
    Send,
    Search,
    Filter,
    MoreHorizontal
  },
  
  // ステータス
  status: {
    CheckCircle,
    XCircle,
    AlertTriangle,
    Info,
    Eye,
    EyeOff
  },
  
  // ファイル
  files: {
    FileText,
    Image
  },
  
  // ユーザー・コミュニケーション
  user: {
    User,
    Users,
    Phone,
    Mail,
    MessageCircle
  },
  
  // 時間・スケジュール
  time: {
    Clock,
    Calendar
  },
  
  // システム
  system: {
    Settings,
    Bell
  },
  
  // ポジション（シフト用）
  positions: {
    Coffee,      // 洗い場
    Utensils,    // レーン
    Users,       // ホール
    Building     // 管理
  },
  
  // その他
  misc: {
    Star,
    Heart,
    Bookmark,
    Tag,
    MapPin
  }
} as const;

// アイコンタイプ定義
export type IconType = keyof typeof ICONS;
export type IconName<T extends IconType> = keyof typeof ICONS[T];
```

### 3. 型定義

```typescript
// types/design.ts
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';

// デザイントークン型
export type ColorToken = keyof typeof DESIGN_TOKENS.colors;
export type ShadowToken = keyof typeof DESIGN_TOKENS.shadows.neumorphic;
export type SpacingToken = keyof typeof DESIGN_TOKENS.spacing;
export type BorderRadiusToken = keyof typeof DESIGN_TOKENS.borderRadius;

// コンポーネント共通プロパティ
export interface BaseComponentProps {
  className?: string;
  children?: React.ReactNode;
  id?: string;
  'data-testid'?: string;
}

// ニューモーフィズムコンポーネント型
export interface NeumorphicProps extends BaseComponentProps {
  variant?: 'raised' | 'pressed' | 'floating' | 'subtle';
  disabled?: boolean;
  interactive?: boolean;
}

// ボタンコンポーネント型
export interface NeumorphicButtonProps extends NeumorphicProps {
  size?: 'sm' | 'md' | 'lg';
  color?: 'primary' | 'secondary' | 'success' | 'warning' | 'error';
  icon?: React.ComponentType<any>;
  iconPosition?: 'left' | 'right';
  loading?: boolean;
  onClick?: () => void;
  type?: 'button' | 'submit' | 'reset';
}

// カードコンポーネント型
export interface NeumorphicCardProps extends NeumorphicProps {
  padding?: SpacingToken;
  borderRadius?: BorderRadiusToken;
  hoverable?: boolean;
}

// シフト関連型
export interface ShiftPosition {
  id: string;
  name: string;
  icon: React.ComponentType<any>;
  color: string;
  sortOrder: number;
}

export interface ShiftTimeSlot {
  hour: number;
  staffCount: number;
  requiredStaff: number;
  shortage: boolean;
  staff: Array<{
    id: string;
    name: string;
    position: string;
  }>;
}
```

---

## ベースコンポーネント

### 1. NeumorphicContainer

```typescript
// components/base/NeumorphicContainer.tsx
import React from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { NeumorphicProps } from '../types/design';

const NeumorphicContainer: React.FC<NeumorphicProps> = ({
  children,
  variant = 'raised',
  disabled = false,
  interactive = false,
  className = '',
  ...props
}) => {
  const baseStyles: React.CSSProperties = {
    backgroundColor: DESIGN_TOKENS.colors.background.primary,
    borderRadius: DESIGN_TOKENS.borderRadius.md,
    transition: `all ${DESIGN_TOKENS.animation.duration.normal} ${DESIGN_TOKENS.animation.easing.ease}`,
    position: 'relative',
    border: 'none',
    outline: 'none'
  };

  const variantStyles: Record<string, React.CSSProperties> = {
    raised: {
      boxShadow: DESIGN_TOKENS.shadows.neumorphic.raised
    },
    pressed: {
      boxShadow: DESIGN_TOKENS.shadows.neumorphic.pressed
    },
    floating: {
      boxShadow: DESIGN_TOKENS.shadows.neumorphic.floating
    },
    subtle: {
      boxShadow: DESIGN_TOKENS.shadows.neumorphic.subtle
    }
  };

  const interactiveStyles: React.CSSProperties = interactive ? {
    cursor: 'pointer',
    userSelect: 'none'
  } : {};

  const disabledStyles: React.CSSProperties = disabled ? {
    opacity: 0.6,
    cursor: 'not-allowed',
    pointerEvents: 'none'
  } : {};

  const combinedStyles = {
    ...baseStyles,
    ...variantStyles[variant],
    ...interactiveStyles,
    ...disabledStyles
  };

  return (
    <div
      style={combinedStyles}
      className={className}
      {...props}
    >
      {children}
    </div>
  );
};

export default NeumorphicContainer;
```

### 2. NeumorphicButton

```typescript
// components/base/NeumorphicButton.tsx
import React, { useState } from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { NeumorphicButtonProps } from '@/types/design';
import NeumorphicContainer from './NeumorphicContainer';

const NeumorphicButton: React.FC<NeumorphicButtonProps> = ({
  children,
  size = 'md',
  color = 'primary',
  icon: Icon,
  iconPosition = 'left',
  loading = false,
  disabled = false,
  onClick,
  type = 'button',
  className = '',
  ...props
}) => {
  const [isPressed, setIsPressed] = useState(false);

  const sizeStyles: Record<string, React.CSSProperties> = {
    sm: {
      padding: `${DESIGN_TOKENS.spacing.sm} ${DESIGN_TOKENS.spacing.md}`,
      fontSize: DESIGN_TOKENS.typography.fontSize.sm,
      minHeight: '36px'
    },
    md: {
      padding: `${DESIGN_TOKENS.spacing.md} ${DESIGN_TOKENS.spacing.lg}`,
      fontSize: DESIGN_TOKENS.typography.fontSize.md,
      minHeight: '44px'
    },
    lg: {
      padding: `${DESIGN_TOKENS.spacing.lg} ${DESIGN_TOKENS.spacing.xl}`,
      fontSize: DESIGN_TOKENS.typography.fontSize.lg,
      minHeight: '52px'
    }
  };

  const colorStyles: Record<string, React.CSSProperties> = {
    primary: {
      color: DESIGN_TOKENS.colors.accent.primary
    },
    secondary: {
      color: DESIGN_TOKENS.colors.text.secondary
    },
    success: {
      color: DESIGN_TOKENS.colors.accent.success
    },
    warning: {
      color: DESIGN_TOKENS.colors.accent.warning
    },
    error: {
      color: DESIGN_TOKENS.colors.accent.error
    }
  };

  const buttonStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    fontFamily: DESIGN_TOKENS.typography.fontFamily.primary,
    width: '100%',
    border: 'none',
    background: 'transparent',
    ...sizeStyles[size],
    ...colorStyles[color]
  };

  const handleMouseDown = () => setIsPressed(true);
  const handleMouseUp = () => setIsPressed(false);
  const handleMouseLeave = () => setIsPressed(false);

  const variant = isPressed ? 'pressed' : 'raised';

  return (
    <NeumorphicContainer
      variant={variant}
      disabled={disabled || loading}
      interactive
      className={className}
      {...props}
    >
      <button
        style={buttonStyles}
        onClick={onClick}
        type={type}
        disabled={disabled || loading}
        onMouseDown={handleMouseDown}
        onMouseUp={handleMouseUp}
        onMouseLeave={handleMouseLeave}
      >
        {loading ? (
          <div style={{
            width: '20px',
            height: '20px',
            border: `2px solid ${colorStyles[color].color}`,
            borderTopColor: 'transparent',
            borderRadius: '50%',
            animation: 'spin 1s linear infinite'
          }} />
        ) : (
          <>
            {Icon && iconPosition === 'left' && <Icon size={18} />}
            {children}
            {Icon && iconPosition === 'right' && <Icon size={18} />}
          </>
        )}
      </button>
    </NeumorphicContainer>
  );
};

export default NeumorphicButton;
```

### 3. NeumorphicCard

```typescript
// components/base/NeumorphicCard.tsx
import React from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { NeumorphicCardProps } from '@/types/design';
import NeumorphicContainer from './NeumorphicContainer';

const NeumorphicCard: React.FC<NeumorphicCardProps> = ({
  children,
  padding = 'lg',
  borderRadius = 'md',
  hoverable = false,
  className = '',
  ...props
}) => {
  const [isHovered, setIsHovered] = useState(false);

  const cardStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing[padding],
    borderRadius: DESIGN_TOKENS.borderRadius[borderRadius],
    width: '100%'
  };

  const hoverableStyles: React.CSSProperties = hoverable ? {
    cursor: 'pointer',
    transform: isHovered ? 'translateY(-2px)' : 'translateY(0)',
    transition: `all ${DESIGN_TOKENS.animation.duration.normal} ${DESIGN_TOKENS.animation.easing.ease}`
  } : {};

  const variant = hoverable && isHovered ? 'floating' : 'raised';

  return (
    <NeumorphicContainer
      variant={variant}
      interactive={hoverable}
      className={className}
      onMouseEnter={() => hoverable && setIsHovered(true)}
      onMouseLeave={() => hoverable && setIsHovered(false)}
      {...props}
    >
      <div style={{...cardStyles, ...hoverableStyles}}>
        {children}
      </div>
    </NeumorphicContainer>
  );
};

export default NeumorphicCard;
```

---

## 画面コンポーネント

### 1. ShiftDisplayPage

```typescript
// pages/[date].tsx
import React, { useState, useEffect } from 'react';
import Head from 'next/head';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicCard from '@/components/base/NeumorphicCard';
import NeumorphicButton from '@/components/base/NeumorphicButton';
import Header from '@/components/layout/Header';
import ShiftChart from '@/components/shift/ShiftChart';
import NoticePanel from '@/components/notice/NoticePanel';
import DailyMessages from '@/components/messages/DailyMessages';
import ActionPanel from '@/components/actions/ActionPanel';

interface ShiftDisplayPageProps {
  date: string;
  shifts: EnrichedShift[];
  notices: Notice[];
  dailyMessages: DailyMessage[];
  positions: Position[];
  users: User[];
  isToday: boolean;
}

const ShiftDisplayPage: React.FC<ShiftDisplayPageProps> = ({
  date,
  shifts,
  notices,
  dailyMessages,
  positions,
  users,
  isToday
}) => {
  const [isLineApp, setIsLineApp] = useState(false);

  useEffect(() => {
    const userAgent = navigator.userAgent;
    const lineApp = userAgent.includes('Line/') || userAgent.includes('LINE/');
    setIsLineApp(lineApp);
  }, []);

  const containerStyles: React.CSSProperties = {
    minHeight: '100vh',
    backgroundColor: DESIGN_TOKENS.colors.background.primary,
    fontFamily: DESIGN_TOKENS.typography.fontFamily.primary,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const mainStyles: React.CSSProperties = {
    maxWidth: '1200px',
    margin: '0 auto',
    padding: DESIGN_TOKENS.spacing.md,
    display: 'flex',
    flexDirection: 'column',
    gap: DESIGN_TOKENS.spacing.lg
  };

  return (
    <>
      <Head>
        <title>{formatDate(date)} シフト表</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style jsx global>{getGlobalStyles()}</style>
      </Head>

      <div style={containerStyles}>
        <Header 
          date={date}
          isToday={isToday}
          isLineApp={isLineApp}
        />
        
        <main style={mainStyles}>
          {/* 重要な共有事項 */}
          {notices.length > 0 && (
            <NoticePanel 
              notices={notices}
              isCompact={isLineApp}
            />
          )}

          {/* シフト表本体 */}
          <NeumorphicCard padding="lg">
            <ShiftChart
              date={date}
              shifts={shifts}
              positions={positions}
              users={users}
              isLineView={isLineApp}
            />
          </NeumorphicCard>

          {/* 当日メッセージ */}
          {isToday && dailyMessages.length > 0 && (
            <DailyMessages messages={dailyMessages} />
          )}

          {/* アクションパネル */}
          <ActionPanel 
            date={date}
            isLineApp={isLineApp}
          />
        </main>
      </div>
    </>
  );
};

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('ja-JP', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};

const getGlobalStyles = () => `
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  body {
    margin: 0;
    padding: 0;
    font-family: ${DESIGN_TOKENS.typography.fontFamily.primary};
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  button:focus,
  div:focus {
    outline: 2px solid ${DESIGN_TOKENS.colors.accent.primary};
    outline-offset: 2px;
  }
`;

export default ShiftDisplayPage;
```

### 2. Header コンポーネント

```typescript
// components/layout/Header.tsx
import React from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicContainer from '@/base/NeumorphicContainer';
import NeumorphicButton from '@/base/NeumorphicButton';

interface HeaderProps {
  date: string;
  isToday: boolean;
  isLineApp: boolean;
}

const Header: React.FC<HeaderProps> = ({ date, isToday, isLineApp }) => {
  const headerStyles: React.CSSProperties = {
    position: isLineApp ? 'static' : 'sticky',
    top: 0,
    zIndex: 10,
    backgroundColor: DESIGN_TOKENS.colors.background.primary,
    padding: DESIGN_TOKENS.spacing.md,
    borderBottom: isLineApp ? 'none' : `1px solid ${DESIGN_TOKENS.colors.shadow.dark}`
  };

  const headerContentStyles: React.CSSProperties = {
    maxWidth: '1200px',
    margin: '0 auto',
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.md
  };

  const titleStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontSize: DESIGN_TOKENS.typography.fontSize.xl,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.semibold,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const navigationStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm
  };

  const todayBadgeStyles: React.CSSProperties = {
    padding: `${DESIGN_TOKENS.spacing.xs} ${DESIGN_TOKENS.spacing.sm}`,
    backgroundColor: DESIGN_TOKENS.colors.accent.primary,
    color: '#ffffff',
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    borderRadius: DESIGN_TOKENS.borderRadius.full,
    boxShadow: DESIGN_TOKENS.shadows.neumorphic.subtle
  };

  const navigateDate = (direction: number) => {
    const currentDate = new Date(date);
    currentDate.setDate(currentDate.getDate() + direction);
    const newDate = currentDate.toISOString().split('T')[0];
    window.location.href = `/${newDate}`;
  };

  const navigateToToday = () => {
    const today = new Date().toISOString().split('T')[0];
    window.location.href = `/${today}`;
  };

  const handleBackToLine = () => {
    if (isLineApp) {
      window.close();
    } else {
      window.history.back();
    }
  };

  return (
    <header style={headerStyles}>
      <NeumorphicContainer variant="subtle">
        <div style={headerContentStyles}>
          <div style={titleStyles}>
            {isLineApp && (
              <NeumorphicButton
                size="sm"
                icon={ICONS.navigation.ArrowLeft}
                onClick={handleBackToLine}
              />
            )}
            <ICONS.time.Calendar size={24} />
            <span>{formatDateShort(date)}</span>
            {isToday && (
              <span style={todayBadgeStyles}>今日</span>
            )}
          </div>
          
          <div style={navigationStyles}>
            <NeumorphicButton
              size="sm"
              icon={ICONS.navigation.ArrowLeft}
              onClick={() => navigateDate(-1)}
            />
            <NeumorphicButton
              size="sm"
              onClick={navigateToToday}
            >
              今日
            </NeumorphicButton>
            <NeumorphicButton
              size="sm"
              icon={ICONS.navigation.ArrowRight}
              onClick={() => navigateDate(1)}
            />
          </div>
        </div>
      </NeumorphicContainer>
    </header>
  );
};

const formatDateShort = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('ja-JP', {
    month: 'short',
    day: 'numeric',
    weekday: 'short'
  });
};

export default Header;
```

### 3. ShiftChart コンポーネント

```typescript
// components/shift/ShiftChart.tsx
import React, { useState } from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicContainer from '@/base/NeumorphicContainer';
import NeumorphicCard from '@/base/NeumorphicCard';

interface ShiftChartProps {
  date: string;
  shifts: EnrichedShift[];
  positions: Position[];
  users: User[];
  isLineView?: boolean;
}

const ShiftChart: React.FC<ShiftChartProps> = ({
  date,
  shifts,
  positions,
  users,
  isLineView = false
}) => {
  const [selectedTimeSlot, setSelectedTimeSlot] = useState<string | null>(null);

  const chartHeaderStyles: React.CSSProperties = {
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: DESIGN_TOKENS.spacing.lg,
    padding: DESIGN_TOKENS.spacing.md,
    borderRadius: DESIGN_TOKENS.borderRadius.sm,
    backgroundColor: DESIGN_TOKENS.colors.background.secondary
  };

  const titleStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontSize: DESIGN_TOKENS.typography.fontSize.lg,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.semibold,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const legendStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.md,
    fontSize: DESIGN_TOKENS.typography.fontSize.sm
  };

  const legendItemStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.xs
  };

  const chartContainerStyles: React.CSSProperties = {
    display: 'grid',
    gap: DESIGN_TOKENS.spacing.md,
    gridTemplateColumns: isLineView ? '1fr' : 'repeat(auto-fit, minmax(300px, 1fr))'
  };

  return (
    <div>
      {/* チャートヘッダー */}
      <div style={chartHeaderStyles}>
        <div style={titleStyles}>
          <ICONS.time.Clock size={20} />
          <span>シフト配置状況</span>
        </div>
        
        <div style={legendStyles}>
          <div style={legendItemStyles}>
            <StatusIndicator status="adequate" />
            <span>適正</span>
          </div>
          <div style={legendItemStyles}>
            <StatusIndicator status="shortage" />
            <span>不足</span>
          </div>
          <div style={legendItemStyles}>
            <StatusIndicator status="excess" />
            <span>余剰</span>
          </div>
          <div style={legendItemStyles}>
            <StatusIndicator status="empty" />
            <span>休み</span>
          </div>
        </div>
      </div>

      {/* シフト表本体 */}
      <div style={chartContainerStyles}>
        {positions.map(position => (
          <PositionCard
            key={position.id}
            position={position}
            shifts={shifts.filter(s => s.positionId === position.id)}
            isCompact={isLineView}
            onTimeSlotClick={setSelectedTimeSlot}
          />
        ))}
      </div>

      {/* 時間帯別詳細表示（モバイル用） */}
      {isLineView && (
        <TimeSlotDetails
          shifts={shifts}
          positions={positions}
          selectedTimeSlot={selectedTimeSlot}
        />
      )}
    </div>
  );
};

// ステータスインジケーター
const StatusIndicator: React.FC<{ status: string }> = ({ status }) => {
  const colors = {
    adequate: DESIGN_TOKENS.colors.accent.primary,
    shortage: DESIGN_TOKENS.colors.accent.error,
    excess: DESIGN_TOKENS.colors.accent.success,
    empty: DESIGN_TOKENS.colors.text.muted
  };

  const indicatorStyles: React.CSSProperties = {
    width: '12px',
    height: '12px',
    borderRadius: DESIGN_TOKENS.borderRadius.full,
    backgroundColor: colors[status] || colors.empty,
    boxShadow: DESIGN_TOKENS.shadows.neumorphic.subtle
  };

  return <div style={indicatorStyles} />;
};

// ポジションカード
const PositionCard: React.FC<{
  position: Position;
  shifts: EnrichedShift[];
  isCompact: boolean;
  onTimeSlotClick: (timeSlot: string) => void;
}> = ({ position, shifts, isCompact, onTimeSlotClick }) => {
  const cardStyles: React.CSSProperties = {
    minHeight: isCompact ? '150px' : '250px'
  };

  const headerStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    marginBottom: DESIGN_TOKENS.spacing.md,
    padding: DESIGN_TOKENS.spacing.sm,
    backgroundColor: DESIGN_TOKENS.colors.background.secondary,
    borderRadius: DESIGN_TOKENS.borderRadius.sm
  };

  const titleStyles: React.CSSProperties = {
    fontSize: DESIGN_TOKENS.typography.fontSize.md,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.semibold,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const shiftsContainerStyles: React.CSSProperties = {
    display: 'flex',
    flexDirection: 'column',
    gap: DESIGN_TOKENS.spacing.sm
  };

  return (
    <NeumorphicCard hoverable style={cardStyles}>
      <div style={headerStyles}>
        <position.icon size={20} />
        <span style={titleStyles}>{position.name}</span>
      </div>
      
      <div style={shiftsContainerStyles}>
        {shifts.length > 0 ? (
          shifts.map(shift => (
            <ShiftItem
              key={shift.id}
              shift={shift}
              isCompact={isCompact}
              onClick={() => onTimeSlotClick(`${shift.startTime}-${shift.endTime}`)}
            />
          ))
        ) : (
          <EmptyShiftItem />
        )}
      </div>
    </NeumorphicCard>
  );
};

// シフトアイテム
const ShiftItem: React.FC<{
  shift: EnrichedShift;
  isCompact: boolean;
  onClick: () => void;
}> = ({ shift, isCompact, onClick }) => {
  const itemStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing.sm,
    backgroundColor: DESIGN_TOKENS.colors.background.surface,
    borderRadius: DESIGN_TOKENS.borderRadius.sm,
    cursor: 'pointer',
    transition: `all ${DESIGN_TOKENS.animation.duration.normal} ${DESIGN_TOKENS.animation.easing.ease}`
  };

  const nameStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.xs,
    marginBottom: DESIGN_TOKENS.spacing.xs,
    fontSize: DESIGN_TOKENS.typography.fontSize.sm,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const timeStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.xs,
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    color: DESIGN_TOKENS.colors.text.secondary,
    fontFamily: DESIGN_TOKENS.typography.fontFamily.mono
  };

  const statusStyles: React.CSSProperties = {
    display: 'inline-flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.xs,
    padding: `${DESIGN_TOKENS.spacing.xs} ${DESIGN_TOKENS.spacing.sm}`,
    borderRadius: DESIGN_TOKENS.borderRadius.full,
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    backgroundColor: shift.status === 'confirmed' 
      ? DESIGN_TOKENS.colors.accent.success 
      : DESIGN_TOKENS.colors.accent.warning,
    color: '#ffffff',
    boxShadow: DESIGN_TOKENS.shadows.neumorphic.subtle
  };

  return (
    <NeumorphicContainer 
      variant="subtle" 
      interactive 
      onClick={onClick}
    >
      <div style={itemStyles}>
        <div style={nameStyles}>
          <ICONS.user.User size={14} />
          <span>{shift.user?.displayName || 'Unknown'}</span>
        </div>
        
        <div style={timeStyles}>
          <ICONS.time.Clock size={12} />
          <span>{shift.startTime} - {shift.endTime}</span>
          {shift.breakMinutes > 0 && (
            <span>(休憩: {shift.breakMinutes}分)</span>
          )}
        </div>
        
        <div style={{ marginTop: DESIGN_TOKENS.spacing.xs }}>
          <span style={statusStyles}>
            {shift.status === 'confirmed' ? (
              <>
                <ICONS.status.CheckCircle size={12} />
                確定
              </>
            ) : (
              <>
                <ICONS.time.Clock size={12} />
                仮
              </>
            )}
          </span>
        </div>
      </div>
    </NeumorphicContainer>
  );
};

// 空のシフトアイテム
const EmptyShiftItem: React.FC = () => {
  const emptyStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing.lg,
    textAlign: 'center',
    color: DESIGN_TOKENS.colors.text.muted,
    fontSize: DESIGN_TOKENS.typography.fontSize.sm,
    fontStyle: 'italic'
  };

  return (
    <NeumorphicContainer variant="pressed">
      <div style={emptyStyles}>
        <ICONS.misc.Star size={24} style={{ marginBottom: DESIGN_TOKENS.spacing.sm }} />
        <div>お休み</div>
      </div>
    </NeumorphicContainer>
  );
};

export default ShiftChart;
```

### 4. NoticePanel コンポーネント

```typescript
// components/notice/NoticePanel.tsx
import React, { useState } from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicCard from '@/base/NeumorphicCard';
import NeumorphicContainer from '@/base/NeumorphicContainer';

interface NoticePanelProps {
  notices: Notice[];
  isCompact?: boolean;
}

const NoticePanel: React.FC<NoticePanelProps> = ({ 
  notices, 
  isCompact = false 
}) => {
  const [isExpanded, setIsExpanded] = useState(!isCompact);
  const [selectedNotice, setSelectedNotice] = useState<Notice | null>(null);

  const headerStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    padding: DESIGN_TOKENS.spacing.md,
    cursor: 'pointer',
    borderRadius: DESIGN_TOKENS.borderRadius.sm,
    backgroundColor: DESIGN_TOKENS.colors.background.secondary
  };

  const titleStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontSize: DESIGN_TOKENS.typography.fontSize.lg,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.semibold,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const badgeStyles: React.CSSProperties = {
    padding: `${DESIGN_TOKENS.spacing.xs} ${DESIGN_TOKENS.spacing.sm}`,
    backgroundColor: DESIGN_TOKENS.colors.accent.error,
    color: '#ffffff',
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    borderRadius: DESIGN_TOKENS.borderRadius.full,
    boxShadow: DESIGN_TOKENS.shadows.neumorphic.subtle
  };

  const contentStyles: React.CSSStyle = {
    padding: DESIGN_TOKENS.spacing.md,
    display: 'flex',
    flexDirection: 'column',
    gap: DESIGN_TOKENS.spacing.md
  };

  const getPriorityIcon = (priority: string) => {
    const iconMap = {
      urgent: ICONS.status.AlertTriangle,
      high: ICONS.status.AlertTriangle,
      medium: ICONS.status.Info,
      low: ICONS.status.Info
    };
    return iconMap[priority] || iconMap.medium;
  };

  const getPriorityColor = (priority: string) => {
    const colorMap = {
      urgent: DESIGN_TOKENS.colors.accent.error,
      high: DESIGN_TOKENS.colors.accent.warning,
      medium: DESIGN_TOKENS.colors.accent.primary,
      low: DESIGN_TOKENS.colors.text.muted
    };
    return colorMap[priority] || colorMap.medium;
  };

  return (
    <NeumorphicCard>
      {/* ヘッダー */}
      <NeumorphicContainer 
        variant="subtle" 
        interactive 
        onClick={() => setIsExpanded(!isExpanded)}
      >
        <div style={headerStyles}>
          <div style={titleStyles}>
            <ICONS.system.Bell size={20} />
            <span>重要な共有事項</span>
            <span style={badgeStyles}>{notices.length}</span>
          </div>
          <div>
            {isExpanded ? (
              <ICONS.navigation.ChevronUp size={20} />
            ) : (
              <ICONS.navigation.ChevronDown size={20} />
            )}
          </div>
        </div>
      </NeumorphicContainer>

      {/* 内容 */}
      {isExpanded && (
        <div style={contentStyles}>
          {notices.map(notice => (
            <NoticeItem
              key={notice.id}
              notice={notice}
              isCompact={isCompact}
              onClick={() => setSelectedNotice(notice)}
              getPriorityIcon={getPriorityIcon}
              getPriorityColor={getPriorityColor}
            />
          ))}
        </div>
      )}

      {/* 詳細モーダル */}
      {selectedNotice && (
        <NoticeModal
          notice={selectedNotice}
          onClose={() => setSelectedNotice(null)}
          getPriorityIcon={getPriorityIcon}
          getPriorityColor={getPriorityColor}
        />
      )}
    </NeumorphicCard>
  );
};

// 通知アイテム
const NoticeItem: React.FC<{
  notice: Notice;
  isCompact: boolean;
  onClick: () => void;
  getPriorityIcon: (priority: string) => React.ComponentType;
  getPriorityColor: (priority: string) => string;
}> = ({ notice, isCompact, onClick, getPriorityIcon, getPriorityColor }) => {
  const PriorityIcon = getPriorityIcon(notice.priority);
  const priorityColor = getPriorityColor(notice.priority);

  const itemStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing.md,
    borderLeft: `4px solid ${priorityColor}`,
    borderRadius: DESIGN_TOKENS.borderRadius.sm,
    backgroundColor: DESIGN_TOKENS.colors.background.surface,
    cursor: 'pointer'
  };

  const headerStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    marginBottom: DESIGN_TOKENS.spacing.sm
  };

  const titleStyles: React.CSSProperties = {
    fontSize: DESIGN_TOKENS.typography.fontSize.md,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const contentStyles: React.CSSProperties = {
    fontSize: DESIGN_TOKENS.typography.fontSize.sm,
    color: DESIGN_TOKENS.colors.text.secondary,
    marginBottom: DESIGN_TOKENS.spacing.sm,
    lineHeight: '1.5'
  };

  const metaStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.md,
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    color: DESIGN_TOKENS.colors.text.muted
  };

  const priorityBadgeStyles: React.CSSProperties = {
    padding: `${DESIGN_TOKENS.spacing.xs} ${DESIGN_TOKENS.spacing.sm}`,
    backgroundColor: priorityColor,
    color: '#ffffff',
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    borderRadius: DESIGN_TOKENS.borderRadius.full,
    textTransform: 'uppercase'
  };

  return (
    <NeumorphicContainer variant="subtle" interactive onClick={onClick}>
      <div style={itemStyles}>
        <div style={headerStyles}>
          <PriorityIcon size={18} color={priorityColor} />
          <span style={titleStyles}>{notice.title}</span>
        </div>
        
        <div style={contentStyles}>
          {isCompact 
            ? notice.content.substring(0, 100) + (notice.content.length > 100 ? '...' : '')
            : notice.content
          }
        </div>
        
        <div style={metaStyles}>
          <div style={{ display: 'flex', alignItems: 'center', gap: DESIGN_TOKENS.spacing.xs }}>
            <ICONS.time.Calendar size={12} />
            <span>{notice.startDate}</span>
          </div>
          {notice.endDate && (
            <div style={{ display: 'flex', alignItems: 'center', gap: DESIGN_TOKENS.spacing.xs }}>
              <span>〜</span>
              <span>{notice.endDate}</span>
            </div>
          )}
          <span style={priorityBadgeStyles}>
            {notice.priority}
          </span>
        </div>
      </div>
    </NeumorphicContainer>
  );
};

// 通知詳細モーダル
const NoticeModal: React.FC<{
  notice: Notice;
  onClose: () => void;
  getPriorityIcon: (priority: string) => React.ComponentType;
  getPriorityColor: (priority: string) => string;
}> = ({ notice, onClose, getPriorityIcon, getPriorityColor }) => {
  const PriorityIcon = getPriorityIcon(notice.priority);
  const priorityColor = getPriorityColor(notice.priority);

  const overlayStyles: React.CSSProperties = {
    position: 'fixed',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    zIndex: 1000,
    padding: DESIGN_TOKENS.spacing.md
  };

  const modalStyles: React.CSSProperties = {
    maxWidth: '500px',
    width: '100%',
    maxHeight: '80vh',
    overflow: 'auto',
    backgroundColor: DESIGN_TOKENS.colors.background.primary,
    borderRadius: DESIGN_TOKENS.borderRadius.lg,
    boxShadow: DESIGN_TOKENS.shadows.neumorphic.floating
  };

  const headerStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    padding: DESIGN_TOKENS.spacing.lg,
    borderBottom: `1px solid ${DESIGN_TOKENS.colors.shadow.dark}`
  };

  const titleStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontSize: DESIGN_TOKENS.typography.fontSize.lg,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.semibold,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const contentStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing.lg,
    fontSize: DESIGN_TOKENS.typography.fontSize.md,
    lineHeight: '1.6',
    color: DESIGN_TOKENS.colors.text.primary,
    whiteSpace: 'pre-wrap'
  };

  const footerStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing.lg,
    borderTop: `1px solid ${DESIGN_TOKENS.colors.shadow.dark}`,
    display: 'flex',
    justifyContent: 'flex-end'
  };

  return (
    <div style={overlayStyles} onClick={onClose}>
      <NeumorphicCard onClick={(e) => e.stopPropagation()}>
        <div style={modalStyles}>
          <div style={headerStyles}>
            <div style={titleStyles}>
              <PriorityIcon size={20} color={priorityColor} />
              <span>{notice.title}</span>
            </div>
            <NeumorphicContainer 
              variant="subtle" 
              interactive 
              onClick={onClose}
              style={{ padding: DESIGN_TOKENS.spacing.sm }}
            >
              <ICONS.actions.X size={18} />
            </NeumorphicContainer>
          </div>
          
          <div style={contentStyles}>
            {notice.content}
          </div>
          
          <div style={footerStyles}>
            <NeumorphicButton onClick={onClose}>
              閉じる
            </NeumorphicButton>
          </div>
        </div>
      </NeumorphicCard>
    </div>
  );
};

export default NoticePanel;
```

### 5. ActionPanel コンポーネント

```typescript
import React, { useState } from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicCard from '@/base/NeumorphicCard';
import NeumorphicButton from '@/base/NeumorphicButton';

interface ActionPanelProps {
  date: string;
  isLineApp: boolean;
}

const ActionPanel: React.FC<ActionPanelProps> = ({ date, isLineApp }) => {
  const [isLoading, setIsLoading] = useState<string | null>(null);

  const handleDownload = async (format: 'pdf' | 'image') => {
    setIsLoading(format);
    try {
      const response = await fetch(`/api/${format}/${date}`);
      const blob = await response.blob();
      
      if (isLineApp) {
        // LINEアプリ内では新しいタブで開く
        const url = window.URL.createObjectURL(blob);
        window.open(url, '_blank');
      } else {
        // 通常ブラウザではダウンロード
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `shift_${date}.${format === 'pdf' ? 'pdf' : 'png'}`;
        a.click();
        window.URL.revokeObjectURL(url);
      }
    } catch (error) {
      alert(`${format.toUpperCase()}ダウンロードに失敗しました`);
    } finally {
      setIsLoading(null);
    }
  };

  const handleShare = () => {
    const url = window.location.href;
    const text = `${formatDate(date)} のシフト表`;
    
    if (isLineApp) {
      // LINEアプリ内の場合はLINE共有
      window.open(
        `line://msg/text/${encodeURIComponent(text + '\n' + url)}`,
        '_self'
      );
    } else if (navigator.share) {
      // Web Share API
      navigator.share({ title: text, url });
    } else {
      // フォールバック：クリップボード
      navigator.clipboard.writeText(url).then(() => {
        alert('URLをコピーしました');
      });
    }
  };

  const panelStyles: React.CSSProperties = {
    display: 'flex',
    flexDirection: 'column',
    gap: DESIGN_TOKENS.spacing.lg
  };

  const titleStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontSize: DESIGN_TOKENS.typography.fontSize.lg,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.semibold,
    color: DESIGN_TOKENS.colors.text.primary,
    marginBottom: DESIGN_TOKENS.spacing.md
  };

  const buttonGridStyles: React.CSSProperties = {
    display: 'grid',
    gridTemplateColumns: 'repeat(auto-fit, minmax(140px, 1fr))',
    gap: DESIGN_TOKENS.spacing.md,
    marginBottom: DESIGN_TOKENS.spacing.lg
  };

  const lineBotHintStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing.md,
    backgroundColor: DESIGN_TOKENS.colors.accent.success + '15',
    borderRadius: DESIGN_TOKENS.borderRadius.md,
    border: `1px solid ${DESIGN_TOKENS.colors.accent.success}40`,
    textAlign: 'center'
  };

  const hintTextStyles: React.CSSProperties = {
    fontSize: DESIGN_TOKENS.typography.fontSize.sm,
    color: DESIGN_TOKENS.colors.accent.success,
    marginBottom: DESIGN_TOKENS.spacing.xs
  };

  const hintSubTextStyles: React.CSSProperties = {
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    color: DESIGN_TOKENS.colors.text.secondary,
    fontFamily: DESIGN_TOKENS.typography.fontFamily.mono
  };

  return (
    <NeumorphicCard>
      <div style={panelStyles}>
        <div style={titleStyles}>
          <ICONS.actions.Download size={20} />
          <span>アクション</span>
        </div>
        
        <div style={buttonGridStyles}>
          <NeumorphicButton
            color="error"
            icon={ICONS.files.FileText}
            loading={isLoading === 'pdf'}
            onClick={() => handleDownload('pdf')}
          >
            PDF
          </NeumorphicButton>
          
          <NeumorphicButton
            color="success"
            icon={ICONS.files.Image}
            loading={isLoading === 'image'}
            onClick={() => handleDownload('image')}
          >
            画像
          </NeumorphicButton>
          
          <NeumorphicButton
            color="primary"
            icon={ICONS.actions.Share2}
            onClick={handleShare}
          >
            シェア
          </NeumorphicButton>
          
          {isLineApp && (
            <NeumorphicButton
              color="secondary"
              icon={ICONS.navigation.ArrowLeft}
              onClick={() => window.close()}
            >
              戻る
            </NeumorphicButton>
          )}
        </div>
        
        {/* LINE Bot案内 */}
        <div style={lineBotHintStyles}>
          <div style={hintTextStyles}>
            <strong>💡 シフト変更・質問は</strong>
          </div>
          <div style={hintSubTextStyles}>
            @シフトボット にメッセージ
          </div>
        </div>
      </div>
    </NeumorphicCard>
  );
};

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('ja-JP', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};

export default ActionPanel;
```

---

## スタイルシート

### 1. グローバルスタイル

```css
/* styles/globals.css */

/* リセット */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ベース設定 */
html {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  scroll-behavior: smooth;
}

body {
  background-color: #e6e9ef;
  color: #2d3748;
  line-height: 1.6;
  min-height: 100vh;
}

/* アニメーション */
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translateY(10px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes slideIn {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* フォーカス管理 */
button:focus,
[tabindex]:focus {
  outline: 2px solid #4299e1;
  outline-offset: 2px;
  border-radius: 4px;
}

/* スクロールバー（Webkit） */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f0f3f7;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #d1d9e0;
  border-radius: 4px;
  border: 1px solid #e6e9ef;
}

::-webkit-scrollbar-thumb:hover {
  background: #a0aec0;
}

/* テキスト選択 */
::selection {
  background: #4299e1;
  color: white;
}

/* LINEアプリ内ブラウザ対応 */
.line-webview {
  padding-top: env(safe-area-inset-top, 0);
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* レスポンシブ対応 */
@media (max-width: 768px) {
  body {
    font-size: 14px;
  }
  
  /* タッチ対応 */
  button,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
}

/* 印刷対応 */
@media print {
  .no-print {
    display: none !important;
  }
  
  body {
    background: white !important;
    color: black !important;
    font-size: 12px;
  }
  
  * {
    box-shadow: none !important;
  }
}

/* ダークモード対応（将来用） */
@media (prefers-color-scheme: dark) {
  .dark-mode {
    /* ダークモード用のニューモーフィズム */
    --bg-primary: #2d3748;
    --bg-secondary: #4a5568;
    --shadow-light: #4a5568;
    --shadow-dark: #1a202c;
    --text-primary: #f7fafc;
    --text-secondary: #e2e8f0;
  }
}

/* アクセシビリティ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* 高コントラスト対応 */
@media (prefers-contrast: high) {
  button,
  [role="button"] {
    border: 2px solid currentColor !important;
  }
}
```

### 2. ユーティリティクラス

```css
/* styles/utilities.css */

/* スペーシングユーティリティ */
.p-xs { padding: 4px; }
.p-sm { padding: 8px; }
.p-md { padding: 16px; }
.p-lg { padding: 24px; }
.p-xl { padding: 32px; }

.m-xs { margin: 4px; }
.m-sm { margin: 8px; }
.m-md { margin: 16px; }
.m-lg { margin: 24px; }
.m-xl { margin: 32px; }

/* フレックスユーティリティ */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-row { flex-direction: row; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.justify-around { justify-content: space-around; }
.flex-1 { flex: 1; }
.flex-shrink-0 { flex-shrink: 0; }

/* グリッドユーティリティ */
.grid { display: grid; }
.grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
.grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
.grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
.grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
.gap-xs { gap: 4px; }
.gap-sm { gap: 8px; }
.gap-md { gap: 16px; }
.gap-lg { gap: 24px; }

/* テキストユーティリティ */
.text-xs { font-size: 12px; }
.text-sm { font-size: 14px; }
.text-md { font-size: 16px; }
.text-lg { font-size: 18px; }
.text-xl { font-size: 20px; }

.font-normal { font-weight: 400; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }

.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }

.text-primary { color: #2d3748; }
.text-secondary { color: #4a5568; }
.text-muted { color: #718096; }
.text-disabled { color: #a0aec0; }

/* ポジションユーティリティ */
.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }

.top-0 { top: 0; }
.right-0 { right: 0; }
.bottom-0 { bottom: 0; }
.left-0 { left: 0; }

/* 表示・非表示ユーティリティ */
.hidden { display: none; }
.block { display: block; }
.inline { display: inline; }
.inline-block { display: inline-block; }

/* オーバーフロー */
.overflow-hidden { overflow: hidden; }
.overflow-auto { overflow: auto; }
.overflow-x-auto { overflow-x: auto; }
.overflow-y-auto { overflow-y: auto; }

/* 角丸 */
.rounded-sm { border-radius: 8px; }
.rounded-md { border-radius: 12px; }
.rounded-lg { border-radius: 16px; }
.rounded-xl { border-radius: 20px; }
.rounded-full { border-radius: 50%; }

/* 幅・高さ */
.w-full { width: 100%; }
.h-full { height: 100%; }
.min-h-screen { min-height: 100vh; }

/* カーソル */
.cursor-pointer { cursor: pointer; }
.cursor-not-allowed { cursor: not-allowed; }

/* ユーザー選択 */
.select-none { user-select: none; }

/* アニメーション */
.transition-all { 
  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);
}

.transition-fast { 
  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.transition-slow { 
  transition: all 350ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* ホバー効果 */
.hover-lift:hover {
  transform: translateY(-2px);
}

.hover-press:active {
  transform: translateY(1px);
}

/* レスポンシブ */
@media (min-width: 768px) {
  .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .md\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .md\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
  .md\:flex-row { flex-direction: row; }
  .md\:text-lg { font-size: 18px; }
}

@media (min-width: 1024px) {
  .lg\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .lg\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
  .lg\:max-w-6xl { max-width: 1152px; }
}
```

### 3. ニューモーフィズム専用スタイル

```css
/* styles/neumorphism.css */

/* ニューモーフィズムベースクラス */
.neumorphic-base {
  background: #e6e9ef;
  border: none;
  outline: none;
  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* バリエーション */
.neumorphic-raised {
  box-shadow: 
    8px 8px 16px #d1d9e0,
    -8px -8px 16px #ffffff;
}

.neumorphic-pressed {
  box-shadow: 
    inset 4px 4px 8px #d1d9e0,
    inset -4px -4px 8px #ffffff;
}

.neumorphic-floating {
  box-shadow: 
    12px 12px 24px #d1d9e0,
    -12px -12px 24px #ffffff;
}

.neumorphic-subtle {
  box-shadow: 
    4px 4px 8px #d1d9e0,
    -4px -4px 8px #ffffff;
}

/* インタラクティブ要素 */
.neumorphic-interactive {
  cursor: pointer;
  user-select: none;
}

.neumorphic-interactive:hover {
  transform: translateY(-1px);
}

.neumorphic-interactive:active {
  transform: translateY(0);
  box-shadow: 
    inset 2px 2px 4px #d1d9e0,
    inset -2px -2px 4px #ffffff;
}

/* 無効状態 */
.neumorphic-disabled {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

/* カラーバリエーション */
.neumorphic-primary {
  background: linear-gradient(145deg, #e6e9ef, #f0f3f7);
}

.neumorphic-secondary {
  background: linear-gradient(145deg, #f0f3f7, #e6e9ef);
}

.neumorphic-surface {
  background: linear-gradient(145deg, #eef1f5, #e6e9ef);
}

/* サイズバリエーション */
.neumorphic-sm {
  border-radius: 8px;
  box-shadow: 
    3px 3px 6px #d1d9e0,
    -3px -3px 6px #ffffff;
}

.neumorphic-md {
  border-radius: 12px;
  box-shadow: 
    6px 6px 12px #d1d9e0,
    -6px -6px 12px #ffffff;
}

.neumorphic-lg {
  border-radius: 16px;
  box-shadow: 
    10px 10px 20px #d1d9e0,
    -10px -10px 20px #ffffff;
}

/* 特殊効果 */
.neumorphic-glow {
  box-shadow: 
    8px 8px 16px #d1d9e0,
    -8px -8px 16px #ffffff,
    0 0 20px rgba(66, 153, 225, 0.3);
}

.neumorphic-error {
  box-shadow: 
    8px 8px 16px #d1d9e0,
    -8px -8px 16px #ffffff,
    0 0 20px rgba(245, 101, 101, 0.3);
}

.neumorphic-success {
  box-shadow: 
    8px 8px 16px #d1d9e0,
    -8px -8px 16px #ffffff,
    0 0 20px rgba(72, 187, 120, 0.3);
}

/* アニメーション効果 */
.neumorphic-pulse {
  animation: neumorphic-pulse 2s infinite;
}

@keyframes neumorphic-pulse {
  0%, 100% {
    box-shadow: 
      8px 8px 16px #d1d9e0,
      -8px -8px 16px #ffffff;
  }
  50% {
    box-shadow: 
      12px 12px 24px #d1d9e0,
      -12px -12px 24px #ffffff;
  }
}

/* レスポンシブ調整 */
@media (max-width: 768px) {
  .neumorphic-raised,
  .neumorphic-floating {
    box-shadow: 
      4px 4px 8px #d1d9e0,
      -4px -4px 8px #ffffff;
  }
  
  .neumorphic-interactive:hover {
    transform: none;
  }
}

/* ダークモード対応（将来用） */
@media (prefers-color-scheme: dark) {
  .dark-mode .neumorphic-base {
    background: #2d3748;
  }
  
  .dark-mode .neumorphic-raised {
    box-shadow: 
      8px 8px 16px #1a202c,
      -8px -8px 16px #4a5568;
  }
  
  .dark-mode .neumorphic-pressed {
    box-shadow: 
      inset 4px 4px 8px #1a202c,
      inset -4px -4px 8px #4a5568;
  }
}
```

---

## 追加のベースコンポーネント

### 6. DailyMessages コンポーネント

```typescript
// components/messages/DailyMessages.tsx
import React, { useState } from 'react';
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicCard from '@/base/NeumorphicCard';
import NeumorphicContainer from '@/base/NeumorphicContainer';
import NeumorphicButton from '@/base/NeumorphicButton';

interface DailyMessagesProps {
  messages: DailyMessage[];
}

const DailyMessages: React.FC<DailyMessagesProps> = ({ messages }) => {
  const [isExpanded, setIsExpanded] = useState(false);
  const visibleMessages = isExpanded ? messages : messages.slice(0, 3);

  const headerStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    marginBottom: DESIGN_TOKENS.spacing.md
  };

  const titleStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm,
    fontSize: DESIGN_TOKENS.typography.fontSize.lg,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.semibold,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const badgeStyles: React.CSSProperties = {
    padding: `${DESIGN_TOKENS.spacing.xs} ${DESIGN_TOKENS.spacing.sm}`,
    backgroundColor: DESIGN_TOKENS.colors.accent.primary,
    color: '#ffffff',
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    borderRadius: DESIGN_TOKENS.borderRadius.full,
    boxShadow: DESIGN_TOKENS.shadows.neumorphic.subtle
  };

  const messagesContainerStyles: React.CSSProperties = {
    display: 'flex',
    flexDirection: 'column',
    gap: DESIGN_TOKENS.spacing.md,
    marginBottom: DESIGN_TOKENS.spacing.lg
  };

  const hintStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing.md,
    backgroundColor: DESIGN_TOKENS.colors.background.secondary,
    borderRadius: DESIGN_TOKENS.borderRadius.sm,
    fontSize: DESIGN_TOKENS.typography.fontSize.sm,
    color: DESIGN_TOKENS.colors.text.secondary,
    textAlign: 'center'
  };

  const getMessageIcon = (type: string) => {
    const iconMap = {
      admin_memo: ICONS.system.Settings,
      line_import: ICONS.user.MessageCircle,
      system: ICONS.system.Bell,
      chat: ICONS.user.MessageCircle
    };
    return iconMap[type] || iconMap.chat;
  };

  const getMessageColor = (type: string, isPrivate: boolean) => {
    if (isPrivate) return DESIGN_TOKENS.colors.accent.warning;
    
    const colorMap = {
      admin_memo: DESIGN_TOKENS.colors.accent.primary,
      line_import: DESIGN_TOKENS.colors.accent.success,
      system: DESIGN_TOKENS.colors.text.muted,
      chat: DESIGN_TOKENS.colors.accent.primary
    };
    return colorMap[type] || colorMap.chat;
  };

  return (
    <NeumorphicCard>
      <div style={headerStyles}>
        <div style={titleStyles}>
          <ICONS.user.MessageCircle size={20} />
          <span>本日の連絡事項・メモ</span>
          <span style={badgeStyles}>{messages.length}件</span>
        </div>
      </div>

      <div style={messagesContainerStyles}>
        {visibleMessages.map(message => (
          <MessageItem
            key={message.id}
            message={message}
            getMessageIcon={getMessageIcon}
            getMessageColor={getMessageColor}
          />
        ))}
      </div>

      {messages.length > 3 && (
        <div style={{ textAlign: 'center', marginBottom: DESIGN_TOKENS.spacing.md }}>
          <NeumorphicButton
            size="sm"
            onClick={() => setIsExpanded(!isExpanded)}
            icon={isExpanded ? ICONS.navigation.ChevronUp : ICONS.navigation.ChevronDown}
          >
            {isExpanded 
              ? '折りたたむ' 
              : `他 ${messages.length - 3}件を表示`
            }
          </NeumorphicButton>
        </div>
      )}

      <div style={hintStyles}>
        <strong>💡 メッセージを追加するには</strong><br/>
        LINEグループで普通にメッセージを送信してください。
      </div>
    </NeumorphicCard>
  );
};

// メッセージアイテム
const MessageItem: React.FC<{
  message: DailyMessage;
  getMessageIcon: (type: string) => React.ComponentType;
  getMessageColor: (type: string, isPrivate: boolean) => string;
}> = ({ message, getMessageIcon, getMessageColor }) => {
  const MessageIcon = getMessageIcon(message.messageType);
  const messageColor = getMessageColor(message.messageType, message.isPrivate);

  const itemStyles: React.CSSProperties = {
    padding: DESIGN_TOKENS.spacing.md,
    borderLeft: `4px solid ${messageColor}`,
    borderRadius: DESIGN_TOKENS.borderRadius.sm,
    backgroundColor: DESIGN_TOKENS.colors.background.surface
  };

  const headerStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    marginBottom: DESIGN_TOKENS.spacing.sm
  };

  const userInfoStyles: React.CSSProperties = {
    display: 'flex',
    alignItems: 'center',
    gap: DESIGN_TOKENS.spacing.sm
  };

  const nameStyles: React.CSSProperties = {
    fontSize: DESIGN_TOKENS.typography.fontSize.sm,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    color: DESIGN_TOKENS.colors.text.primary
  };

  const timeStyles: React.CSSProperties = {
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    color: DESIGN_TOKENS.colors.text.muted,
    fontFamily: DESIGN_TOKENS.typography.fontFamily.mono
  };

  const contentStyles: React.CSSProperties = {
    fontSize: DESIGN_TOKENS.typography.fontSize.sm,
    color: DESIGN_TOKENS.colors.text.secondary,
    lineHeight: '1.5',
    whiteSpace: 'pre-wrap'
  };

  const privateBadgeStyles: React.CSSProperties = {
    padding: `${DESIGN_TOKENS.spacing.xs} ${DESIGN_TOKENS.spacing.sm}`,
    backgroundColor: DESIGN_TOKENS.colors.accent.warning,
    color: '#ffffff',
    fontSize: DESIGN_TOKENS.typography.fontSize.xs,
    fontWeight: DESIGN_TOKENS.typography.fontWeight.medium,
    borderRadius: DESIGN_TOKENS.borderRadius.full
  };

  const formatTime = (timestamp: string) => {
    return new Date(timestamp).toLocaleTimeString('ja-JP', {
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  return (
    <NeumorphicContainer variant="subtle">
      <div style={itemStyles}>
        <div style={headerStyles}>
          <div style={userInfoStyles}>
            <MessageIcon size={16} color={messageColor} />
            <span style={nameStyles}>{message.userName}</span>
            {message.isPrivate && (
              <span style={privateBadgeStyles}>管理者のみ</span>
            )}
          </div>
          <span style={timeStyles}>
            {formatTime(message.createdAt)}
          </span>
        </div>
        
        <div style={contentStyles}>
          {message.message}
        </div>
      </div>
    </NeumorphicContainer>
  );
};

export default DailyMessages;
```

### 7. パッケージ.json

```json
{
  "name": "neumorphism-shift-management",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "next": "^14.0.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "lucide-react": "^0.263.1",
    "@line/bot-sdk": "^7.5.2",
    "puppeteer": "^21.5.0",
    "qrcode": "^1.5.3"
  },
  "devDependencies": {
    "@types/node": "^20.8.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@types/qrcode": "^1.5.0",
    "typescript": "^5.2.0",
    "eslint": "^8.51.0",
    "eslint-config-next": "^14.0.0"
  }
}
```

### 8. Next.js設定

```typescript
// next.config.js
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    appDir: true,
  },
  
  // 画像最適化
  images: {
    domains: ['line.me', 'cdn.line.me'],
    formats: ['image/webp', 'image/avif'],
  },
  
  // 静的ファイルの最適化
  compress: true,
  
  // PWA対応（将来用）
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-XSS-Protection',
            value: '1; mode=block',
          },
        ],
      },
      {
        source: '/(.*)\\.(css|js|woff2?|ttf|otf|eot|svg|ico|png|jpe?g|gif|webp|avif),
        headers: [
          {
            key: 'Cache-Control',
            value: 'public, max-age=31536000, immutable',
          },
        ],
      },
    ];
  },
};

module.exports = nextConfig;
```

---

## 使用方法とファイル構成

### プロジェクト構成
```
project/
├── components/
│   ├── base/
│   │   ├── NeumorphicContainer.tsx
│   │   ├── NeumorphicButton.tsx
│   │   └── NeumorphicCard.tsx
│   ├── layout/
│   │   └── Header.tsx
│   ├── shift/
│   │   └── ShiftChart.tsx
│   ├── notice/
│   │   └── NoticePanel.tsx
│   ├── messages/
│   │   └── DailyMessages.tsx
│   └── actions/
│       └── ActionPanel.tsx
├── constants/
│   ├── design-tokens.ts
│   └── icons.ts
├── types/
│   └── design.ts
├── styles/
│   ├── globals.css
│   ├── utilities.css
│   └── neumorphism.css
├── pages/
│   └── [date].tsx
└── lib/
    └── database.ts
```

### 使用例
```typescript
// コンポーネントでの使用例
import { DESIGN_TOKENS } from '@/constants/design-tokens';
import { ICONS } from '@/constants/icons';
import NeumorphicButton from '@/components/base/NeumorphicButton';

const MyComponent = () => {
  return (
    <NeumorphicButton
      color="primary"
      size="md"
      icon={ICONS.actions.Download}
      onClick={handleDownload}
    >
      ダウンロード
    </NeumorphicButton>
  );
};
```

この設計により、TailwindCSSを使わずにニューモーフィズムデザインを実現し、lucide-reactアイコンを統一的に管理できるシステムが構築できます。デザイントークンと定数の分離により、保守性とスケーラビリティを確保しています。